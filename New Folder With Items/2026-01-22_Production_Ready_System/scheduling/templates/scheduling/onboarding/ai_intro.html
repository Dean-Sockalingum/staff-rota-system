{% extends 'scheduling/base.html' %}
{% load static %}

{% block title %}AI Assistant Introduction{% endblock %}

{% block extra_css %}
<link href="{% static 'css/onboarding.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="onboarding-container">
    <div class="tour-overlay" id="tourOverlay">
        <div class="tour-content">
            <div class="tour-header">
                <h2><i class="fas fa-robot"></i> AI Assistant Introduction</h2>
                <button class="btn-skip" onclick="skipTour()">Skip Tour</button>
            </div>
            
            <div class="tour-step active" id="step-1">
                <div class="tour-step-content">
                    <h3>Meet Your AI Assistant</h3>
                    <p>Your personal AI assistant is here to help you work faster and smarter.</p>
                    <p>Just type what you need in natural language, and the AI will understand and respond.</p>
                    <div class="ai-demo-icon">
                        <i class="fas fa-robot fa-5x text-primary"></i>
                    </div>
                </div>
                <div class="tour-navigation">
                    <button class="btn btn-primary" onclick="nextStep()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
            
            <div class="tour-step" id="step-2">
                <div class="tour-step-content">
                    <h3>How to Access</h3>
                    <p>Click the <i class="fas fa-robot text-primary"></i> icon in the top navigation bar to open the AI chat.</p>
                    <p>You can also use keyboard shortcuts:</p>
                    <ul class="feature-list">
                        <li><kbd>Ctrl</kbd> + <kbd>K</kbd> (Windows/Linux)</li>
                        <li><kbd>âŒ˜</kbd> + <kbd>K</kbd> (Mac)</li>
                    </ul>
                </div>
                <div class="tour-navigation">
                    <button class="btn btn-secondary" onclick="prevStep()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="btn btn-primary" onclick="nextStep()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
            
            <div class="tour-step" id="step-3">
                <div class="tour-step-content">
                    <h3>Example Commands</h3>
                    <p>Try these commands to get started:</p>
                    <div class="example-commands">
                        {% for command in example_commands %}
                        <div class="command-example">
                            <i class="fas fa-comment-dots"></i>
                            <span>"{{ command }}"</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="tour-navigation">
                    <button class="btn btn-secondary" onclick="prevStep()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="btn btn-primary" onclick="nextStep()">Next <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
            
            <div class="tour-step" id="step-4">
                <div class="tour-step-content">
                    <h3>Tips for Best Results</h3>
                    <ul class="feature-list">
                        <li><i class="fas fa-check"></i> Be specific - mention dates, names, or units</li>
                        <li><i class="fas fa-check"></i> Ask follow-up questions for more detail</li>
                        <li><i class="fas fa-check"></i> Use natural language - talk like you would to a colleague</li>
                        <li><i class="fas fa-check"></i> The AI learns from your preferences over time</li>
                    </ul>
                </div>
                <div class="tour-navigation">
                    <button class="btn btn-secondary" onclick="prevStep()"><i class="fas fa-arrow-left"></i> Back</button>
                    <button class="btn btn-success" onclick="completeTour()">Got It! <i class="fas fa-check"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
let currentStep = 1;
const totalSteps = 4;

function showStep(stepNumber) {
    document.querySelectorAll('.tour-step').forEach(step => {
        step.classList.remove('active');
    });
    document.getElementById('step-' + stepNumber).classList.add('active');
    currentStep = stepNumber;
}

function nextStep() {
    if (currentStep < totalSteps) {
        showStep(currentStep + 1);
    }
}

function prevStep() {
    if (currentStep > 1) {
        showStep(currentStep - 1);
    }
}

function skipTour() {
    if (confirm('Are you sure you want to skip this tour?')) {
        window.location.href = "{{ next_url }}";
    }
}

function completeTour() {
    fetch('{% url "onboarding_mark_step_complete" %}', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify({
            step: 'ai_intro'
        })
    }).then(response => {
        window.location.href = "{{ next_url }}";
    });
}
</script>

<style>
.ai-demo-icon {
    text-align: center;
    margin: 2rem 0;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

.command-example {
    background: #f8f9fa;
    border-left: 3px solid var(--bs-primary);
    padding: 1rem;
    margin: 0.5rem 0;
    border-radius: 4px;
}

.command-example i {
    color: var(--bs-primary);
    margin-right: 0.5rem;
}

kbd {
    background: #333;
    color: white;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-size: 0.9em;
}
</style>
{% endblock %}
